<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>G-Expenses Calculator</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background: #f4f7fb;
      margin: 0;
      padding: 40px 0;
      display: flex;
      justify-content: center;
    }
    .container {
      max-width: 1200px;
      width: 95%;
      background: #ffffff;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.08);
      padding: 30px;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .header h1 {
      font-size: 24px;
      font-weight: 600;
      color: #2c3e50;
    }
    .header .actions {
      display: flex;
      gap: 10px;
      align-items: center;
    }
    .header .actions button {
      background: none;
      border: none;
      font-size: 20px;
      cursor: pointer;
      color: #34495e;
      transition: color 0.2s;
    }
    .header .actions button:hover {
      color: #007bff;
    }
    .main {
      display: flex;
      gap: 30px;
      flex-wrap: wrap;
    }
    .panel {
      flex: 1 1 450px;
    }
    h2 {
      font-size: 20px;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    label {
      display: block;
      margin-top: 10px;
      margin-bottom: 5px;
      color: #555;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      font-size: 14px;
    }
    .radio-group {
      display: flex;
      gap: 20px;
      margin-bottom: 10px;
    }
    button.primary {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 12px;
      width: 100%;
      margin-top: 20px;
      font-size: 15px;
      cursor: pointer;
    }
    .summary-box {
      background: #f0f3f8;
      border-radius: 10px;
      padding: 20px;
      margin-bottom: 20px;
    }
    .tabs, .filters {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 10px;
    }
    .tabs button, .filters select, .filters input {
      flex: 1;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    .transactions {
      margin-top: 15px;
      max-height: 200px;
      overflow-y: auto;
    }
    .transaction {
      background: #eef3fb;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 5px;
      font-size: 14px;
    }
    canvas {
      margin-top: 20px;
      max-height: 300px;
    }
    #deleteModal {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.5);
      display: none;
      align-items: center;
      justify-content: center;
    }
    #deleteModal .modal-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }
    #deleteModal button {
      margin: 10px;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    #deleteModal .confirm {
      background: #e74c3c;
      color: white;
    }
    #deleteModal .cancel {
      background: #95a5a6;
      color: white;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ðŸ“˜ G-Expenses Calculator</h1>
    <div class="actions">
      <select id="sortSelect" onchange="sortTransactions()">
        <option value="">ðŸ”½ Sort</option>
        <option value="asc">Amount Ascending</option>
        <option value="desc">Amount Descending</option>
        <option value="newest">Newest First</option>
        <option value="oldest">Oldest First</option>
      </select>
      <button onclick="document.getElementById('deleteModal').style.display='flex'" title="Delete All Data"><i class="fas fa-trash"></i></button>
    </div>
  </div>
  <div class="main">
    <div class="panel">
      <h2>Add Transaction</h2>
      <div class="radio-group">
        <label><input type="radio" name="type" value="sale" checked> Sale</label>
        <label><input type="radio" name="type" value="expense"> Expense</label>
      </div>
      <label>Date</label>
      <input type="date" id="date" />
      <label>Description</label>
      <input type="text" id="description" />
      <label>Amount</label>
      <input type="number" id="amount" />
      <label>Client</label>
      <input type="text" id="client" />
      <button class="primary" onclick="addTransaction()">Add</button>
    </div>
    <div class="panel">
      <h2>Filters</h2>
      <div class="filters">
        <input type="number" id="filterAmount" placeholder="Amount" />
        <select id="amountCond">
          <option value=">">Above</option>
          <option value="<">Below</option>
        </select>
        <input type="date" id="filterDate" />
        <select id="dateCond">
          <option value=">">After</option>
          <option value="<">Before</option>
        </select>
        <button onclick="applyFilters()">Apply</button>
        <button onclick="resetFilters()">Reset</button>
      </div>
      <div class="transactions" id="transaction-list"></div>
    </div>
  </div>
  <canvas id="chart"></canvas>
</div>
<div id="deleteModal">
  <div class="modal-content">
    <p>Are you sure you want to delete all transactions?</p>
    <button class="confirm" onclick="clearData()">Yes, Delete</button>
    <button class="cancel" onclick="document.getElementById('deleteModal').style.display='none'">Cancel</button>
  </div>
</div>
<script>
  let transactions = JSON.parse(localStorage.getItem('transactions') || '[]');
  const list = document.getElementById('transaction-list');

  function renderTransactions(data = transactions) {
    list.innerHTML = data.map(t => `<div class='transaction'>${t.date} - ${t.type} - â‚¹${t.amount} - ${t.description} (${t.client})</div>`).join('');
  }

  function addTransaction() {
    const t = {
      type: document.querySelector('input[name="type"]:checked').value,
      date: document.getElementById('date').value,
      description: document.getElementById('description').value,
      amount: parseFloat(document.getElementById('amount').value),
      client: document.getElementById('client').value
    };
    if (!t.date || !t.description || !t.amount || !t.client) return alert("All fields required");
    transactions.push(t);
    localStorage.setItem('transactions', JSON.stringify(transactions));
    renderTransactions();
  }

  function clearData() {
    transactions = [];
    localStorage.removeItem('transactions');
    renderTransactions();
    document.getElementById('deleteModal').style.display = 'none';
  }

  function sortTransactions() {
    const val = document.getElementById('sortSelect').value;
    if (val === 'asc') transactions.sort((a,b)=>a.amount-b.amount);
    else if (val === 'desc') transactions.sort((a,b)=>b.amount-a.amount);
    else if (val === 'newest') transactions.sort((a,b)=>new Date(b.date)-new Date(a.date));
    else if (val === 'oldest') transactions.sort((a,b)=>new Date(a.date)-new Date(b.date));
    renderTransactions();
  }

  function applyFilters() {
    const fAmt = parseFloat(document.getElementById('filterAmount').value);
    const amtCond = document.getElementById('amountCond').value;
    const fDate = document.getElementById('filterDate').value;
    const dateCond = document.getElementById('dateCond').value;
    let filtered = transactions;
    if (!isNaN(fAmt)) filtered = filtered.filter(t => eval(t.amount + amtCond + fAmt));
    if (fDate) filtered = filtered.filter(t => eval(`'${t.date}' ${dateCond} '${fDate}'`));
    renderTransactions(filtered);
  }

  function resetFilters() {
    document.getElementById('filterAmount').value = '';
    document.getElementById('filterDate').value = '';
    renderTransactions();
  }

  document.getElementById('date').valueAsDate = new Date();
  renderTransactions();
</script>
</body>
</html>
